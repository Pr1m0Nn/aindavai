<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quadro de Avisos</title>
    <link href="https://fonts.googleapis.com/css2?family=Gotham:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Gotham', sans-serif;
            background-color: #BE8751;
            margin: 0;
            padding: 20px;
            overflow: hidden;
            min-height: 100vh;
        }
        
        .central-text {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 2.5em;
            font-weight: 700;
            color: black;
            text-align: center;
            z-index: 10;
            pointer-events: none;
            width: 80%;
            max-width: 600px;
        }
        
        .post-it {
            position: absolute;
            width: 200px;
            height: 200px;
            padding: 15px;
            box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.2);
            cursor: move;
            user-select: none;
            overflow: hidden;
            transition: transform 0.3s, z-index 0.3s;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        
        .post-it:hover {
            transform: scale(1.1) rotate(0deg);
            z-index: 100;
            box-shadow: 8px 8px 20px rgba(0,0,0,0.3);
        }
        
        .post-it img {
            max-width: 100%;
            max-height: 100px;
            display: block;
            margin: 0 auto 10px;
            object-fit: contain;
        }
        
        .post-it p {
            margin: 0;
            font-size: 1em;
            text-align: center;
            word-wrap: break-word;
            flex-grow: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Gotham', sans-serif;
        }
        
        .lyrics {
            font-style: italic;
        }
    </style>
</head>
<body>
    <!-- Texto central fixo -->
    <div class="central-text">Que bagunça! Tenho que me organizar mais... mas como?</div>

    <script>
        const lyrics = [
            "Q",
            "I know too well I'm Underneath yoUr spell So, darling, if yoU smell something bUrning, it's my heart",
            "when i look at you i can't believe it's true. You're all i ever dreaMed of and you love Me",
            "It's nothing nEw... I wait for you",
            "I don't know what I'm sUpposed to do. HaUnted by the ghost of yoU. Oh, take me back to the night we met",
            "And as the earth burns to the ground, oh, boy, it's you that I lie with, as the atoM boMb locks in.",
            "Don't you give me up, pleAse don't give up on me, I belong with you, And only you, bAby",
            "You look so pretty and I love this vIew",
            "Meu bem, quero arrancar a triSteza de você, vamoS fugir aSSim que a gente Se ver",
            "'CAuse I, I cAn feel A reAl connection, A supernAturAl AttrAction-Ah. I got the feels for you, yeAh, yeAh, yeAh, yeAh",
            "Sei que uM dia eu vou Morrer, saiba que isso taMbéM vale pra você. Mas enquanto esse dia não veM, quero passar todos os outros ao seu lado",
            "I will fall in lOve with you Over and Over again",
            "E",
            "Nossa, como eu amo passar tempo com ele... deveria passar mais.",
            "Queria poder beija-lo, será que algum dia vou poder?",
            "Hm, que saudades.",
            "AIai meu gatinho, que falta de criatividade </3",
            "Eu to perdendo a sanidade aos poucos, desculpa",
            "Oi eu amo meu homem muito muito muito",
            "To achando que nem palavras, melodias ou a combinação podem explicar meu sentimento por ti..."
        ];
        
        // Imagens correspondentes às letras na mesma ordem (sem Q.png e E.png)
        const images = [
            "", // Q - sem imagem
            "assets/images/MasochismTango.png",
            "assets/images/YouLoveMe.png",
            "assets/images/IWaitForYou.png",
            "assets/images/TheNightWeMet.png",
            "assets/images/AsTheWorldCavesIn.png",
            "assets/images/DarkRed.png",
            "assets/images/WeFellInLoveInOctober.png",
            "assets/images/ChaleEmAlaska.png",
            "assets/images/TheFeels.png",
            "assets/images/SerenataExistencialista.png",
            "assets/images/WouldYouFallInLoveWithMeAgain.png",
            "", // E - sem imagem
            "", // Sem imagem para esta frase
            "", // Sem imagem para esta frase
            "", // Sem imagem para esta frase
            "", // Sem imagem para esta frase
            "", // Sem imagem para esta frase
            "", // Sem imagem para esta frase
            ""  // Sem imagem para esta frase
        ];

        // Cores aleatórias para os post-its
        const colors = [
            '#FFFB8F', // Amarelo post-it tradicional
            '#FF9E9E', // Rosa claro
            '#B5EAD7', // Verde menta
            '#C7CEEA', // Azul claro
            '#E2F0CB', // Verde claro
            '#FFDAC1', // Pêssego
            '#F8B195', // Coral
            '#F67280', // Rosa
            '#C06C84', // Lilás
            '#6C5B7B'  // Roxo
        ];
        
        function createPostIt() {
            const postIts = [];
            const centerX = window.innerWidth / 2;
            const centerY = window.innerHeight / 2;
            const minRadius = 250;
            const maxRadius = Math.min(window.innerWidth, window.innerHeight) * 0.45;
            const spacing = 220; // Distância mínima entre post-its
            
            for (let i = 0; i < lyrics.length; i++) {
                let attempts = 0;
                let validPosition = false;
                let left, top;
                
                // Tenta encontrar uma posição que não sobreponha outros post-its
                while (!validPosition && attempts < 100) {
                    attempts++;
                    
                    // Posição em círculo ao redor do texto central
                    const angle = Math.random() * Math.PI * 2;
                    const radius = minRadius + Math.random() * (maxRadius - minRadius);
                    left = centerX + Math.cos(angle) * radius - 100; // 100 = metade da largura
                    top = centerY + Math.sin(angle) * radius - 100; // 100 = metade da altura
                    
                    // Verifica colisão com outros post-its
                    validPosition = true;
                    for (const other of postIts) {
                        const dx = left - other.left;
                        const dy = top - other.top;
                        const distance = Math.sqrt(dx * dx + dy * dy);
                        
                        if (distance < spacing) {
                            validPosition = false;
                            break;
                        }
                    }
                }
                
                if (!validPosition) {
                    // Se não encontrar posição ideal após muitas tentativas, coloca aleatoriamente
                    left = Math.random() * (window.innerWidth - 200);
                    top = Math.random() * (window.innerHeight - 200);
                }
                
                const postIt = document.createElement('div');
                postIt.className = 'post-it';
                
                // Cor aleatória
                const randomColor = colors[Math.floor(Math.random() * colors.length)];
                postIt.style.backgroundColor = randomColor;
                
                // Cor do texto baseada no brilho do fundo
                const brightness = getBrightness(randomColor);
                postIt.style.color = brightness > 180 ? '#333' : '#fff';
                
                // Rotação aleatória
                const rotation = -10 + Math.random() * 20;
                postIt.style.transform = `rotate(${rotation}deg)`;
                
                // Posiciona o post-it
                postIt.style.left = `${left}px`;
                postIt.style.top = `${top}px`;
                
                // Adiciona imagem correspondente se existir
                if (images[i] && images[i] !== "") {
                    const img = document.createElement('img');
                    img.src = images[i];
                    img.alt = "Imagem da música";
                    postIt.appendChild(img);
                }
                
                const lyric = document.createElement('p');
                lyric.className = 'lyrics';
                lyric.textContent = lyrics[i];
                postIt.appendChild(lyric);
                
                // Tornar arrastável
                makeDraggable(postIt);
                
                document.body.appendChild(postIt);
                postIts.push({ left, top });
            }
        }
        
        // Função para calcular brilho da cor
        function getBrightness(hexColor) {
            const r = parseInt(hexColor.substr(1, 2), 16);
            const g = parseInt(hexColor.substr(3, 2), 16);
            const b = parseInt(hexColor.substr(5, 2), 16);
            return (r * 299 + g * 587 + b * 114) / 1000;
        }
        
        function makeDraggable(element) {
            let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
            let isDragging = false;
            let startX, startY;
            
            element.onmousedown = dragMouseDown;
            
            function dragMouseDown(e) {
                if (e.target.tagName === 'IMG') {
                    return; // Não inicia arrasto se clicar em uma imagem
                }
                
                e = e || window.event;
                e.preventDefault();
                // get the mouse cursor position at startup:
                pos3 = e.clientX;
                pos4 = e.clientY;
                startX = e.clientX;
                startY = e.clientY;
                document.onmouseup = closeDragElement;
                document.onmousemove = elementDrag;
                isDragging = false;
                element.style.zIndex = 100; // Traz para frente ao arrastar
            }
            
            function elementDrag(e) {
                e = e || window.event;
                e.preventDefault();
                
                // Verifica se o movimento é suficiente para considerar como arrasto
                if (!isDragging && (Math.abs(e.clientX - startX) > 5 || Math.abs(e.clientY - startY) > 5)) {
                    isDragging = true;
                }
                
                // calculate the new cursor position:
                pos1 = pos3 - e.clientX;
                pos2 = pos4 - e.clientY;
                pos3 = e.clientX;
                pos4 = e.clientY;
                // set the element's new position:
                element.style.top = (element.offsetTop - pos2) + "px";
                element.style.left = (element.offsetLeft - pos1) + "px";
            }
            
            function closeDragElement() {
                // stop moving when mouse button is released:
                document.onmouseup = null;
                document.onmousemove = null;
                
                if (isDragging) {
                    // Se estava arrastando, previne o clique
                    element.style.pointerEvents = 'none';
                    setTimeout(() => {
                        element.style.pointerEvents = 'auto';
                    }, 100);
                }
                
                setTimeout(() => {
                    element.style.zIndex = ''; // Restaura z-index após arrastar
                }, 300);
            }
        }
        
        // Verifica se o usuário digitou a resposta correta na URL
        function checkURL() {
            const path = window.location.pathname.split('/').pop();
            
            if (path === 'Tobi' || path === 'tobi') {
                // Resposta correta - próxima fase
                window.location.href = 'Tobi';
            }
        }
        
        window.onload = function() {
            createPostIt();
            checkURL();
        };
        
        window.onresize = function() {
            // Reorganiza os post-its ao redimensionar a janela
            const postItElements = document.querySelectorAll('.post-it');
            if (postItElements.length > 0) {
                document.querySelectorAll('.post-it').forEach(el => el.remove());
                createPostIt();
            }
        };
        
        window.onpopstate = checkURL;
    </script>
</body>
</html>
